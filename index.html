<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForgeChat - AI Chat Widget Demo</title>
    <link rel="stylesheet" href="src/forgechat.css">
    <style>
        /* Demo page styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .demo-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 800px;
            width: 90%;
            margin: 20px;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .demo-title {
            font-size: 2.5em;
            font-weight: 700;
            color: #333;
            margin: 0 0 10px 0;
        }
        
        .demo-title .forge-badge {
            font-size: 0.4em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            margin-left: 10px;
            vertical-align: middle;
        }

        .demo-subtitle {
            font-size: 1.2em;
            color: #666;
            margin: 0;
        }

        .demo-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .feature {
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #1976d2;
        }

        .feature-title {
            font-weight: 600;
            color: #333;
            margin: 0 0 8px 0;
        }

        .feature-description {
            color: #666;
            font-size: 0.9em;
            line-height: 1.5;
            margin: 0;
        }

        .demo-controls {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .controls-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin: 0 0 20px 0;
        }

        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .control {
            display: flex;
            flex-direction: column;
        }

        .control label {
            font-size: 0.9em;
            font-weight: 500;
            color: #555;
            margin-bottom: 5px;
        }

        .control input,
        .control select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .control input:focus,
        .control select:focus {
            outline: none;
            border-color: #1976d2;
            box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1);
        }

        .demo-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .demo-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .demo-btn.primary {
            background: #1976d2;
            color: white;
        }

        .demo-btn.primary:hover {
            background: #1565c0;
            transform: translateY(-1px);
        }

        .demo-btn.secondary {
            background: #f5f5f5;
            color: #333;
            border: 1px solid #ddd;
        }

        .demo-btn.secondary:hover {
            background: #e9ecef;
        }

        .demo-btn.success {
            background: #4caf50;
            color: white;
        }

        .demo-btn.success:hover {
            background: #45a049;
        }

        .demo-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .demo-info {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .demo-info h3 {
            color: #1976d2;
            margin: 0 0 10px 0;
            font-size: 1.1em;
        }

        .demo-info p {
            color: #333;
            line-height: 1.6;
            margin: 0;
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-indicator.active {
            background: #4caf50;
        }

        .status-indicator.inactive {
            background: #ccc;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .demo-container {
                padding: 20px;
                margin: 10px;
            }

            .demo-title {
                font-size: 2em;
            }

            .control-group {
                grid-template-columns: 1fr;
            }

            .demo-buttons {
                flex-direction: column;
                align-items: center;
            }

            .demo-btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-header">
            <h1 class="demo-title">üí¨ ForgeChat <span class="forge-badge">by Buildly Labs</span></h1>
            <p class="demo-subtitle">AI-Powered Chat Widget with BabbleBeaver Integration</p>
        </div>

        <div class="demo-features">
            <div class="feature">
                <h3 class="feature-title">ü§ñ AI-Powered Conversations</h3>
                <p class="feature-description">Intelligent responses powered by advanced language models with context awareness.</p>
            </div>
            
            <div class="feature">
                <h3 class="feature-title">üìù Punchlist Integration</h3>
                <p class="feature-description">Seamlessly submit issues and tasks directly to your project punchlist.</p>
            </div>
            
            <div class="feature">
                <h3 class="feature-title">üé® Fully Customizable</h3>
                <p class="feature-description">Customize colors, position, behavior, and styling to match your brand.</p>
            </div>
            
            <div class="feature">
                <h3 class="feature-title">üì± Responsive Design</h3>
                <p class="feature-description">Works perfectly on desktop, tablet, and mobile devices.</p>
            </div>
        </div>

        <div class="demo-controls">
            <h2 class="controls-title">Demo Configuration</h2>
            
            <div class="control-group">
                <div class="control">
                    <label for="position">Position</label>
                    <select id="position">
                        <option value="bottom-right">Bottom Right</option>
                        <option value="bottom-left">Bottom Left</option>
                        <option value="top-right">Top Right</option>
                        <option value="top-left">Top Left</option>
                    </select>
                </div>
                
                <div class="control">
                    <label for="theme">Theme</label>
                    <select id="theme">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                </div>
                
                <div class="control">
                    <label for="primaryColor">Primary Color</label>
                    <input type="color" id="primaryColor" value="#1976d2">
                </div>
                
                <div class="control">
                    <label for="title">Title</label>
                    <input type="text" id="title" value="BabbleBeaver Assistant" placeholder="Chatbot title">
                </div>
            </div>
            
            <div class="control-group">
                <div class="control">
                    <label for="apiEndpoint">API Endpoint</label>
                    <input type="url" id="apiEndpoint" value="https://api.buildlycore.com" placeholder="https://api.buildlycore.com">
                </div>
                
                <div class="control">
                    <label for="productUuid">Product UUID</label>
                    <input type="text" id="productUuid" placeholder="your-product-uuid">
                </div>
            </div>
        </div>

        <div class="demo-buttons">
            <button id="initBtn" class="demo-btn primary">
                <span class="status-indicator inactive"></span>
                Initialize ChatBot
            </button>
            
            <button id="openBtn" class="demo-btn secondary" disabled>
                Open Chat
            </button>
            
            <button id="sendBtn" class="demo-btn secondary" disabled>
                Send Test Message
            </button>
            
            <button id="clearBtn" class="demo-btn secondary" disabled>
                Clear Session
            </button>
            
            <button id="destroyBtn" class="demo-btn secondary" disabled>
                Destroy ChatBot
            </button>
        </div>

        <div class="demo-info">
            <h3>üí° How to Use</h3>
            <p>
                1. Configure the settings above to match your requirements<br>
                2. Click "Initialize ChatBot" to create the widget<br>
                3. Use the control buttons to test different features<br>
                4. Click the chat bubble in the corner to start a conversation<br>
                5. Try submitting a punchlist item using the "üìù Submit to Punchlist" button
            </p>
        </div>
    </div>

    <!-- Include the BabbleBeaver ChatBot script -->
    <script src="src/forgechat.js"></script>
    
    <script>
        // Demo application
        let chatbot = null;
        
        // DOM elements
        const elements = {
            initBtn: document.getElementById('initBtn'),
            openBtn: document.getElementById('openBtn'),
            sendBtn: document.getElementById('sendBtn'),
            clearBtn: document.getElementById('clearBtn'),
            destroyBtn: document.getElementById('destroyBtn'),
            position: document.getElementById('position'),
            theme: document.getElementById('theme'),
            primaryColor: document.getElementById('primaryColor'),
            title: document.getElementById('title'),
            apiEndpoint: document.getElementById('apiEndpoint'),
            productUuid: document.getElementById('productUuid')
        };

        // Initialize button
        elements.initBtn.addEventListener('click', () => {
            if (chatbot) {
                chatbot.destroy();
            }

            const config = {
                position: elements.position.value,
                theme: elements.theme.value,
                primaryColor: elements.primaryColor.value,
                title: elements.title.value,
                apiEndpoint: elements.apiEndpoint.value,
                productUuid: elements.productUuid.value,
                organizationUuid: 'demo-org-uuid',
                debug: true,
                enablePunchlist: true,
                persistSession: true,
                
                onReady: (bot) => {
                    console.log('ChatBot ready!', bot);
                    updateButtonStates(true);
                },
                
                onMessage: (message) => {
                    console.log('New message:', message);
                },
                
                onPunchlistSubmit: (result) => {
                    console.log('Punchlist submitted:', result);
                    alert('Punchlist item submitted successfully! Check the console for details.');
                },
                
                onError: (error, context) => {
                    console.error(`Error in ${context}:`, error);
                }
            };

            chatbot = new ForgeChat(config);
        });

        // Open button
        elements.openBtn.addEventListener('click', () => {
            if (chatbot) {
                chatbot.openChat();
            }
        });

        // Send test message button
        elements.sendBtn.addEventListener('click', () => {
            if (chatbot) {
                const testMessages = [
                    "Hello! This is a test message.",
                    "Can you help me with a project issue?",
                    "I found a bug that needs to be tracked.",
                    "What features do you support?",
                    "How do I submit something to the punchlist?"
                ];
                
                const randomMessage = testMessages[Math.floor(Math.random() * testMessages.length)];
                chatbot.sendChatMessage(randomMessage);
                chatbot.openChat();
            }
        });

        // Clear session button
        elements.clearBtn.addEventListener('click', () => {
            if (chatbot) {
                chatbot.clearSession();
                alert('Session cleared! All messages have been removed.');
            }
        });

        // Destroy button
        elements.destroyBtn.addEventListener('click', () => {
            if (chatbot) {
                chatbot.destroy();
                chatbot = null;
                updateButtonStates(false);
            }
        });

        // Update button states
        function updateButtonStates(initialized) {
            elements.initBtn.disabled = initialized;
            elements.openBtn.disabled = !initialized;
            elements.sendBtn.disabled = !initialized;
            elements.clearBtn.disabled = !initialized;
            elements.destroyBtn.disabled = !initialized;
            
            const indicator = elements.initBtn.querySelector('.status-indicator');
            indicator.className = `status-indicator ${initialized ? 'active' : 'inactive'}`;
            
            elements.initBtn.textContent = initialized ? '‚úì ChatBot Active' : 'Initialize ChatBot';
            if (initialized) {
                elements.initBtn.insertAdjacentHTML('afterbegin', '<span class="status-indicator active"></span>');
            } else {
                elements.initBtn.insertAdjacentHTML('afterbegin', '<span class="status-indicator inactive"></span>');
            }
        }

        // Dynamic configuration updates
        elements.position.addEventListener('change', () => {
            if (chatbot) {
                chatbot.updateConfig({ position: elements.position.value });
                chatbot.container.className = `forgechat-widget position-${elements.position.value}`;
            }
        });

        elements.theme.addEventListener('change', () => {
            if (chatbot) {
                chatbot.updateConfig({ theme: elements.theme.value });
                chatbot.container.setAttribute('data-chatbot-theme', elements.theme.value);
            }
        });

        elements.primaryColor.addEventListener('change', () => {
            if (chatbot) {
                chatbot.updateConfig({ primaryColor: elements.primaryColor.value });
            }
        });

        // Add some demo styling for dark theme
        elements.theme.addEventListener('change', () => {
            if (elements.theme.value === 'dark') {
                document.body.style.background = 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)';
            } else {
                document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            }
        });

        // Auto-populate some demo values
        window.addEventListener('load', () => {
            // You can set demo values here
            elements.productUuid.value = 'demo-product-uuid-' + Math.random().toString(36).substr(2, 9);
        });
    </script>
</body>
</html>